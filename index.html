<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>SibolTech - Dashboard</title>
	<link rel="stylesheet" href="index.css">
	<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
</head>
<body>
	<header class="topbar">
		<button id="burger" aria-label="Toggle navigation" class="burger">
			<span></span>
			<span></span>
			<span></span>
		</button>
		<div class="brand">
			<img src="../STLogoFinal2.png" alt="SibolTech" class="brand-logo">
		</div>
		
		<div class="topbar-right">
			<div id="topbarClock" class="topbar-clock" aria-live="polite">
				<div id="topbarTime" class="topbar-time">--:--:--</div>
				<div id="topbarDate" class="topbar-date">----</div>
			</div>
		</div>
	</header>

	<aside id="sidebar" class="sidebar">
		<nav>
			<ul>
				<li><a href="#" data-tab="home"><span class="icon"><img src="../dashboardicon.png" alt="Dashboard"></span><span>Dashboard</span></a></li>
				<li><a href="#" data-tab="training"><span class="icon"><img src="../trainingicon.png" alt="Training"></span><span>Training</span></a></li>
                <li class="sidebar-dropdown">
                <a href="#" id="predictiontab" data-tab="predicting"><span class="icon"><img src="../predictionicon.png" alt="Prediction"></span><span>Prediction</span>
                <span class="caret">▾</span>
				</a>
				<ul class="dropdown-menu" id="predictionMenu">
					<li><a href="#" class="prediction-option" data-metric="height">Height</a></li>
					<li><a href="#" class="prediction-option" data-metric="length">Length</a></li>
					<li><a href="#" class="prediction-option" data-metric="width">Width</a></li>
					<li><a href="#" class="prediction-option" data-metric="leaves">No. of Leaves</a></li>
					<li><a href="#" class="prediction-option" data-metric="branches">No. of Branches</a></li>
					</ul>
                </li>	
				<li><a href="#" data-tab="sensors"><span class="icon"><img src="../sensorreadingsicon.png" alt="Sensor Readings"></span><span>Sensor Readings</span></a></li>
				<li><a href="#" data-tab="growth-state"><span class="icon"><img src="../growthstateicon.png" alt="Growth State"></span><span>Growth State</span></a></li>
				<li><a href="#" data-tab="calibrate"><span class="icon"><img src="../Calibrateicon.png" alt="Calibrate"></span><span>Calibrate</span></a></li>
				<li><a href="#" data-tab="manual"><span class="icon"><img src="../manualicon.png" alt="Manual"></span><span>Manual</span></a></li>
				<li class="sidebar-dropdown1">
                <a href="#" id="historytab" data-tab="history"><span class="icon"><img src="../historicon.png" alt="History"></span><span>History</span>
                <span class="caret">▾</span>
				</a>
				<ul class="dropdown-menu1" id="historyMenu">
					<li><a href="#" class="history" data-metric="Plantbtn">Plant</a></li>
					<li><a href="#" class="history" data-metric="Actuatorbtn">Actuator</a></li>
					</ul>
                </li>
				<li><a href="#" data-tab="logout"><span class="icon"><img src="../logoutlogo.png" alt="Logout"></span><span>Logout</span></a></li>
				
			</ul>
		</nav>
	</aside>

	<main class="main">
		<section id="home" class="tab-content active">
			<div class="dashboard-grid">
				<div class="main-col">
					<div class="sensor-cards card">
                        <div class="card-header">Sensor Readings</div>
						<div class="sensor" data-key="ph">
							<div class="label">
								<span>pH Level</span>
								<img src="../informationicon.png" alt="Info" class="info-icon" data-sensor="ph">
							</div>
                        <div class="value" id="val-ph"></div>
						<div class="alert" id="alert-ph"></div></div>
						<div class="sensor" data-key="do">
							<div class="label">
								<span>Dissolved Oxygen</span>
								<img src="../informationicon.png" alt="Info" class="info-icon" data-sensor="do">
							</div>
                        <div class="value" id="val-do"></div>
						<div class="alert" id="alert-do"></div></div>
						<div class="sensor" data-key="temp">
							<div class="label">
								<span>Temperature</span>
								<img src="../informationicon.png" alt="Info" class="info-icon" data-sensor="temp">
							</div>
                        <div class="value" id="val-temp"></div>
						<div class="alert" id="alert-temp"></div></div>
						<div class="sensor" data-key="hum">
							<div class="label">
								<span>Humidity</span>
								<img src="../informationicon.png" alt="Info" class="info-icon" data-sensor="hum">
							</div>
                        <div class="value" id="val-hum"></div>
						<div class="alert" id="alert-hum"></div></div>
						<div class="sensor" data-key="tds">
							<div class="label">
								<span>Total Dissolved Solids</span>
								<img src="../informationicon.png" alt="Info" class="info-icon" data-sensor="tds">
							</div>
                        <div class="value" id="val-tds"></div>
						<div class="alert" id="alert-tds"></div></div>
					</div>
					<div class="actuator-card">
						<div class="card-header actuator-header">
							<span>Actuator Status</span>
							<div class="override-toggle">
								<span class="override-label">OVERRIDE:</span>
								<label class="toggle-switch actuator-override">
									<input type="checkbox" id="actuatorOverrideToggle">
									<span class="toggle-slider"></span>
									<span class="toggle-text">OFF</span>
								</label>
							</div>
						</div>
						<div class="actuators">
							<div class="act">
								<div>Air Pump</div>
								<label class="toggle-switch actuator-toggle">
								<input type="checkbox" id="act-air">
									<span class="toggle-slider"></span>
									<span class="toggle-text">OFF</span>
								</label>
							</div>
							<div class="act">
								<div>Exhaust Fan (In)</div>
								<label class="toggle-switch actuator-toggle">
								<input type="checkbox" id="act-fan-in" checked>
									<span class="toggle-slider"></span>
									<span class="toggle-text">ON</span>
								</label>
							</div>
							<div class="act">
								<div>Exhaust Fan (Out)</div>
								<label class="toggle-switch actuator-toggle">
								<input type="checkbox" id="act-fan-out" checked>
									<span class="toggle-slider"></span>
									<span class="toggle-text">ON</span>
								</label>
							</div>
							<div class="act">
								<div>Grow Lights (Aerponics)</div>
								<label class="toggle-switch actuator-toggle">
								<input type="checkbox" id="act-lights-aerponics" checked>
									<span class="toggle-slider"></span>
									<span class="toggle-text">ON</span>
								</label>
							</div>
							<div class="act">
								<div>Grow Lights(DWC)</div>
								<label class="toggle-switch actuator-toggle">
								<input type="checkbox" id="act-lights-dwc" checked>
									<span class="toggle-slider"></span>
									<span class="toggle-text">ON</span>
								</label>
							</div>
						</div>
					</div>
					<div class="nutrition-solution-card">
						<div class="card-header">Nutrient Solution</div>
						<div class="nutrient-grid">
							<div class="nutrient-item">
								<div class="nutrient-label">pH Up</div>
								<button class="nutrient-btn" id="btn-ph-up" aria-label="Activate pH Up"></button>
							</div>
							<div class="nutrient-item">
								<div class="nutrient-label">pH Down</div>
								<button class="nutrient-btn" id="btn-ph-down" aria-label="Activate pH Down"></button>
							</div>
							<div class="nutrient-item">
								<div class="nutrient-label">Leafy Green</div>
								<button class="nutrient-btn" id="btn-leafy-green" aria-label="Activate Leafy Green"></button>
							</div>
							<div class="nutrient-item">
								<div class="nutrient-label">Misting Pump</div>
								<button class="nutrient-btn" id="btn-misting-pump" aria-label="Activate Misting Pump"></button>
							</div>
						</div>
					</div>
						<!-- Notification Container -->
					<div id="notificationContainer" class="notification-container"></div>
					<!-- Notifications will appear as popups on the side -->
					 
			<!-- Threshold Information Modal -->
			<div id="thresholdModal" class="threshold-modal">
			<div class="threshold-modal-content">
			<div class="threshold-modal-header">
				<h3 id="thresholdTitle">Sensor Thresholds</h3>
				<button class="threshold-close" id="thresholdClose">&times;</button>
			</div>
			<div class="threshold-modal-body">
				<div class="threshold-item neutral-threshold">
					<div class="threshold-indicator neutral-indicator"></div>
					<div class="threshold-info">
						<div class="threshold-label">Optimal Range</div>
						<div class="threshold-range" id="thresholdNeutral">-</div>
					</div>
				</div>
				<div class="threshold-item normal-threshold">
					<div class="threshold-indicator normal-indicator"></div>
					<div class="threshold-info">
						<div class="threshold-label">Acceptable Range</div>
						<div class="threshold-range" id="thresholdNormal">-</div>
					</div>
				</div>
				<div class="threshold-item dangerous-threshold">
					<div class="threshold-indicator dangerous-indicator"></div>
					<div class="threshold-info">
						<div class="threshold-label">Critical Range</div>
						<div class="threshold-range" id="thresholdDangerous">-</div>
					</div>
				</div>
			</div>
			<div class="threshold-modal-footer">
				<div class="threshold-unit" id="thresholdUnit"></div>
			</div>
				</div>
			</div>
				
				
				</div>
				
			</div>
		</section>

		<section id="training" class="tab-content">
				<div class="training-header">
				<ul class="training-tabs">
					<li class="training-tab-btn active" data-sensor="training-aero">Aeroponics</li>
					<li class="training-tab-btn" data-sensor="training-dwc">Deep Water Culture</li>
					<li class="training-tab-btn" data-sensor="training-trad">Traditional</li>
				</ul>	
				<div class="inline-actions">
					<button id="clear" class="clear-btn">Clear</button>
					<button id="submit-btn" class="submit-btn">Submit</button>
				</div>
			</div>
			<div class="training-side-by-side">
					<div class="aeroponics-params card params-card" id="aeroponicsParams">
						<div class="card-header">
						<span>Aeroponics</span>
						</div>
                    
						<div id="aeroponicsPlantsList">
						<!-- Single Aeroponics card containing six plant rows -->
						<div class="sensor-input-card1" data-sensor="all">
							<!-- Row 1 -->
							<div class="sensor-inputs-row1">
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No</span><span class="sensor-number-display1">1</span></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
							</div>
							<!-- Row 2 -->
							<div class="sensor-inputs-row1">
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">2</span></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
							</div>
							<!-- Row 3 -->
							<div class="sensor-inputs-row1">
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">3</span></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
							</div>
							<!-- Row 4 -->
							<div class="sensor-inputs-row1">
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">4</span></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
							</div>
							<!-- Row 5 -->
							<div class="sensor-inputs-row1">
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">5</span></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
							</div>
							<!-- Row 6 -->
							<div class="sensor-inputs-row1">
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">6</span></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
								<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
							</div>
						</div>
						</div>
						
					 </div>
					
					
					
					
				
				
					<div class="dwc-params card params-card" id="dwcParams">
						<div class="card-header">
							<span>Deep Water Culture</span>
						</div>
						
						<div id="dwcPlantsList">
							<!-- Single DWC card containing six plant rows -->
							<div class="sensor-input-card1" data-sensor="all">
								<!-- Row 1 -->
								<div class="sensor-inputs-row1">
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No</span><span class="sensor-number-display1">1</span></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
								</div>
								<!-- Row 2 -->
								<div class="sensor-inputs-row1">
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">2</span></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
								</div>
								<!-- Row 3 -->
								<div class="sensor-inputs-row1">
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">3</span></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
								</div>
								<!-- Row 4 -->
								<div class="sensor-inputs-row1">
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">4</span></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
								</div>
								<!-- Row 5 -->
								<div class="sensor-inputs-row1">
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">5</span></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
								</div>
								<!-- Row 6 -->
								<div class="sensor-inputs-row1">
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">6</span></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
									</div>
								</div>
							</div>
						</div>
						

						<div class="traditional-params card params-card" id="traditionalParams">
						<div class="card-header">
							<span>Traditional Farming</span>
						</div>

							
						
						<div id="traditionalPlantsList">
							<!-- Single Traditional card containing six plant rows -->
							<div class="sensor-input-card1" data-sensor="all">
								<!-- Row 1 -->
								<div class="sensor-inputs-row1">
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No</span><span class="sensor-number-display1">1</span></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
								</div>
								<!-- Row 2 -->
								<div class="sensor-inputs-row1">
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">2</span></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
								</div>
								<!-- Row 3 -->
								<div class="sensor-inputs-row1">
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">3</span></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
								</div>
								<!-- Row 4 -->
								<div class="sensor-inputs-row1">
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">4</span></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
								</div>
								<!-- Row 5 -->
								<div class="sensor-inputs-row1">
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">5</span></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
								</div>
								<!-- Row 6 -->
								<div class="sensor-inputs-row1">
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1"></span><span class="sensor-number-display1">6</span></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Height</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="height"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Length</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="length"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">Width</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="width"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Leaves</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="leaves"></label></div>
									<div class="sensor-column1"><label class="sensor-input-label1"><span class="sensor-label-text1">No. of Branches</span><input type="number" step="0.1" class="sensor-input1" data-sensor="all" data-field="branches"></label></div>
								</div>
							</div>
						</div>
					</div>			
			</div>
			</div>
							
			
		</section>
			
		<!-- Validation Error Modal -->
		<div id="validationErrorModal" class="validation-error-modal" style=" display: none;">
			<div id="validationConnector" class="validation-connector"></div>
			<div class="validation-error-content">
				<div class="validation-error-header">
					<h3>⚠️ Missing Values</h3>
					<button class="validation-close-btn" id="validationErrorClose">&times;</button>
				</div>
				<div class="validation-error-body">
					<p>Please fill in all values before submitting.</p>
				</div>
				<div class="validation-error-footer">
					<button class="validation-ok-btn" id="validationErrorClose2">OK</button>
				</div>
			</div>
		</div>

		<!-- Success Modal for Training -->
		<div id="successModal" class="success-modal simple-success-modal" style=" display: none;">
			<div class="success-modal-content">
				<div class="simple-success-icon">✓</div>
				<div class="simple-success-text">Successfully Submitted</div>
			</div>
		</div>

		<!-- Success Modal for Prediction -->
		<div id="predictionSuccessModal" class="success-modal simple-success-modal" style=" display: none;">
			<div class="success-modal-content">
				<div class="simple-success-text">Successfully Submitted</div>
				<div class="simple-success-icon">✓</div>
			</div>
		</div>

	
		<section id="predicting" class="tab-content">
		<div class="aero-dwc-header">
				<ul class="calibrate-tabs">
					<li class="calibrate-tab-btn active aero-dwc-tab-btn" data-sensor="aeroponicssystem">Aeroponics</li>
					<li class="calibrate-tab-btn aero-dwc-tab-btn" data-sensor="deepwaterculturesystem">Deep Water Culture</li>
				</ul>
				<button class="btn submit-all-pred-btn" id="submitAllPredBtn">SUBMIT</button>
			</div>
	
		<div class="prediction-graphs-two-column">
			<div id="aeroponicsContainer" class="farming-method-container active"> 
				<div id="plantsGraphsContainer-aeroponics" class="plants-graphs-container">
					<!-- Aeroponics plant graphs will be generated here -->
					<!-- Example static template (one plant) -->
					<div class="plant-graph-card">
						<div class="card-header">Plant 1</div>
						<div class="metrics-row">
							<div class="metric-card">
								<div class="metric-label">NO OF LEAVES</div>
								<div class="metric-value" data-metric="leaves" data-value="leaves"></div>
							</div>
							<div class="metric-card">
								<div class="metric-label">NO OF BRANCHES</div>
								<div class="metric-value" data-metric="branches" data-value="branches"></div>
							</div>
							<div class="metric-card">
								<div class="metric-label">HEIGHT</div>
								<div class="metric-value" data-metric="height" data-value="height"></div>
							</div>
							<div class="metric-card">
								<div class="metric-label">WEIGHT</div>
								<div class="metric-value" data-metric="width" data-value="width"></div>
							</div>
							<div class="metric-card">
								<div class="metric-label">LENGTH</div>
								<div class="metric-value" data-metric="length" data-value="length"></div>
							</div>
						</div>
						<canvas id="plant-1-aeroponics-graph" class="plant-graph-canvas" width="600" height="300"></canvas>
						<div class="prediction-input-panel">
							<div class="inputs-row">
								<div class="input-group-mini"><label class="input-mini-label">NO OF LEAVES<input type="number" step="0.1" class="prediction-input" data-metric="leaves"></label></div>
								<div class="input-group-mini"><label class="input-mini-label">NO OF BRANCHES<input type="number" step="0.1" class="prediction-input" data-metric="branches"></label></div>
								<div class="input-group-mini"><label class="input-mini-label">HEIGHT<input type="number" step="0.1" class="prediction-input" data-metric="height"></label></div>
								<div class="input-group-mini"><label class="input-mini-label">WEIGHT<input type="number" step="0.1" class="prediction-input" data-metric="width"></label></div>
								<div class="input-group-mini"><label class="input-mini-label">LENGTH<input type="number" step="0.1" class="prediction-input" data-metric="length"></label></div>
							</div>
							<div class="controls-row">
								<div class="canvas-legend">
									<div class="legend-item"><span class="legend-swatch actual"></span><span>Actual</span></div>
									<div class="legend-item"><span class="legend-swatch predicted"></span><span>Predicted</span></div>
								</div>
							</div>
						</div>
						<button class="btn show-all-btn" aria-label="Show all data">Show all</button>
					</div>
				</div>
				
			</div>
			<div id="dwcContainer" class="farming-method-container"> 
				<div id="plantsGraphsContainer-dwc" class="plants-graphs-container"> 
					<!-- DWC plant graphs will be generated here -->
					<!-- Example static template (one plant) -->
					<div class="plant-graph-card">
						<div class="card-header">Plant 1</div>
						<div class="metrics-row">
							<div class="metric-card">
								<div class="metric-label">NO OF LEAVES</div>
								<div class="metric-value" data-metric="leaves" data-value="leave"></div>
							</div>
							<div class="metric-card">
								<div class="metric-label">NO OF BRANCHES</div>
								<div class="metric-value" data-metric="branches" data-value="branch"></div>
							</div>
							<div class="metric-card">
								<div class="metric-label">HEIGHT</div>
								<div class="metric-value" data-metric="height" data-value="height"></div>
							</div>
							<div class="metric-card">
								<div class="metric-label">WEIGHT</div>
								<div class="metric-value" data-metric="width" data-value="width"></div>
							</div>
							<div class="metric-card">
								<div class="metric-label">LENGTH</div>
								<div class="metric-value" data-metric="length" data-value="length"></div>
							</div>
						</div>
						<canvas id="plant-1-dwc-graph" class="plant-graph-canvas" width="600" height="250"></canvas>
						<div class="prediction-input-panel">
							<div class="inputs-row">
								<div class="input-group-mini"><label class="input-mini-label">NO OF LEAVES<input type="number" step="0.1" class="prediction-input" data-metric="leaves"></label></div>
								<div class="input-group-mini"><label class="input-mini-label">NO OF BRANCHES<input type="number" step="0.1" class="prediction-input" data-metric="branches"></label></div>
								<div class="input-group-mini"><label class="input-mini-label">HEIGHT<input type="number" step="0.1" class="prediction-input" data-metric="height"></label></div>
								<div class="input-group-mini"><label class="input-mini-label">WEIGHT<input type="number" step="0.1" class="prediction-input" data-metric="width"></label></div>
								<div class="input-group-mini"><label class="input-mini-label">LENGTH<input type="number" step="0.1" class="prediction-input" data-metric="length"></label></div>
							</div>
							<div class="controls-row">
								<div class="canvas-legend">
									<div class="legend-item"><span class="legend-swatch actual"></span><span>Actual</span></div>
									<div class="legend-item"><span class="legend-swatch predicted"></span><span>Predicted</span></div>
								</div>
							</div>
						</div> 
						<button class="btn show-all-btn" aria-label="Show all data">Show all</button>
						</div>
			</div>
		</div>
		
		</section>
			
		
		
		<section id="sensors" class="tab-content">
			<h2>Sensor Readings</h2>

				<div class="sensor-graphs-grid">
				<div class="sensor-graph-card">
					<div class="sensor-graph-header">pH Level</div>
					<div class="sensor-graph-canvas-wrapper">
						<canvas id="sensorGraph-ph" class="sensor-graph-canvas"></canvas>
					</div>
				</div>
				<div class="sensor-graph-card">
					<div class="sensor-graph-header">Dissolved Oxygen</div>
					<div class="sensor-graph-canvas-wrapper">
						<canvas id="sensorGraph-do" class="sensor-graph-canvas"></canvas>
					</div>
				</div>
				<div class="sensor-graph-card">
					<div class="sensor-graph-header">Total Dissolved Solids</div>
					<div class="sensor-graph-canvas-wrapper">
						<canvas id="sensorGraph-tds" class="sensor-graph-canvas"></canvas>
					</div>
				</div>
				<div class="sensor-graph-card">
					<div class="sensor-graph-header">Temperature</div>
					<div class="sensor-graph-canvas-wrapper">
						<canvas id="sensorGraph-temp" class="sensor-graph-canvas"></canvas>
					</div>
				</div>
				</div>
			
			<div class="sensor-graph-card sensor-graph-card-full">
				<div class="sensor-graph-header">Humidity</div>
				<div class="sensor-graph-canvas-wrapper">
					<canvas id="sensorGraph-hum" class="sensor-graph-canvas"></canvas>
				</div>
			</div>
		</section>

		<section id="calibrate" class="tab-content calibrate-tab">
			<h2>Sensor Calibration</h2>
			
			<!-- Calibration Mode Toggle -->
			<div class="cal-mode-toggle">
				<div class="cal-mode-info">
					<span class="cal-mode-label">Calibration Mode</span>
					<span class="cal-mode-desc">Disables all actuators during calibration</span>
				</div>
				<button class="cal-mode-btn" id="calModeBtn">
					<span class="cal-mode-status" id="calModeStatus">OFF</span>
					<span class="cal-mode-icon" id="calModeIcon">⚡</span>
				</button>
			</div>
			
			<!-- Sensor Selection Tabs -->
			<div class="calibrate-header">
				<ul class="calibrate-tabs">
					<li class="calibrate-tab-btn active" data-sensor="ph">pH Level</li>
					<li class="calibrate-tab-btn" data-sensor="do">Dissolved Oxygen</li>
					<li class="calibrate-tab-btn" data-sensor="tds">TDS</li>
				</ul>	
			</div>

			<!-- ========== pH CALIBRATION ========== -->
			<div class="simple-cal-panel" data-sensor-type="ph">
				<div class="cal-status-card">
					<div class="cal-status-header">
						<span class="cal-status-title">Current Calibration</span>
						<span class="cal-status-badge" id="phCalStatus">Not Calibrated</span>
					</div>
					<div class="cal-status-values">
						<div class="cal-stat"><span class="cal-stat-label">Slope</span><span class="cal-stat-value" id="phCurrentSlope">--</span></div>
						<div class="cal-stat"><span class="cal-stat-label">Offset</span><span class="cal-stat-value" id="phCurrentOffset">--</span></div>
					</div>
				</div>

				<div class="cal-live-card">
					<div class="cal-live-header">Live Voltage Reading</div>
					<div class="cal-live-value" id="phLiveVoltage">-- V</div>
					<div class="cal-live-hint">Updates every 2 seconds</div>
					<div id="phStability" style="margin-top:8px;font-size:13px;"></div>
				</div>

				<div class="cal-points-card">
					<div class="cal-points-header">
						<span>Calibration Points</span>
						<select id="phPointMode" class="cal-point-select">
							<option value="2">2-Point (Recommended)</option>
							<option value="3">3-Point (Most Accurate)</option>
						</select>
					</div>

					<div class="cal-temp-row">
						<label>Water Temperature:</label>
						<input type="number" id="phBufferTemp" value="25" step="0.1" class="cal-temp-input"> °C
					</div>

					<!-- Point 1: pH 4.00 -->
					<div class="cal-point" id="phPoint1">
						<div class="cal-point-header">
							<span class="cal-point-num">1</span>
							<span class="cal-point-label">pH 4.00 Buffer</span>
							<span class="cal-point-status" id="phPoint1Status">Waiting</span>
						</div>
						<div class="cal-point-body">
							<div class="cal-point-voltage">Captured: <span id="phPoint1Voltage">--</span> V</div>
							<button class="cal-capture-btn" id="phCapture1">Capture pH 4.00</button>
						</div>
					</div>

					<!-- Point 2: pH 6.86 -->
					<div class="cal-point" id="phPoint2">
						<div class="cal-point-header">
							<span class="cal-point-num">2</span>
							<span class="cal-point-label">pH 6.86 Buffer</span>
							<span class="cal-point-status" id="phPoint2Status">Waiting</span>
						</div>
						<div class="cal-point-body">
							<div class="cal-point-voltage">Captured: <span id="phPoint2Voltage">--</span> V</div>
							<button class="cal-capture-btn" id="phCapture2">Capture pH 6.86</button>
						</div>
					</div>

					<!-- Point 3: pH 9.18 (optional) -->
					<div class="cal-point" id="phPoint3" style="display:none;">
						<div class="cal-point-header">
							<span class="cal-point-num">3</span>
							<span class="cal-point-label">pH 9.18 Buffer</span>
							<span class="cal-point-status" id="phPoint3Status">Waiting</span>
						</div>
						<div class="cal-point-body">
							<div class="cal-point-voltage">Captured: <span id="phPoint3Voltage">--</span> V</div>
							<button class="cal-capture-btn" id="phCapture3">Capture pH 9.18</button>
						</div>
					</div>
				</div>

				<div class="cal-result-card" id="phResultCard" style="display:none;">
					<div class="cal-result-header">Calibration Result</div>
					<div class="cal-result-values">
						<div class="cal-result-item"><span>Slope:</span><span id="phNewSlope">--</span></div>
						<div class="cal-result-item"><span>Offset:</span><span id="phNewOffset">--</span></div>
					</div>
				</div>

				<div class="cal-actions">
					<button class="cal-btn cal-btn-secondary" id="phClearBtn">Clear</button>
					<button class="cal-btn cal-btn-primary" id="phApplyBtn" disabled>Apply Calibration</button>
				</div>
			</div>

			<!-- ========== DO CALIBRATION ========== -->
			<div class="simple-cal-panel" data-sensor-type="do" style="display:none;">
				<div class="cal-status-card">
					<div class="cal-status-header">
						<span class="cal-status-title">Current Calibration</span>
						<span class="cal-status-badge" id="doCalStatus">Not Calibrated</span>
					</div>
					<div class="cal-status-values">
						<div class="cal-stat"><span class="cal-stat-label">Slope</span><span class="cal-stat-value" id="doCurrentSlope">--</span></div>
						<div class="cal-stat"><span class="cal-stat-label">Offset</span><span class="cal-stat-value" id="doCurrentOffset">--</span></div>
					</div>
				</div>

				<div class="cal-live-card">
					<div class="cal-live-header">Live Voltage Reading</div>
					<div class="cal-live-value" id="doLiveVoltage">-- V</div>
					<div class="cal-live-hint">Updates every 2 seconds</div>
					<div id="doStability" style="margin-top:8px;font-size:13px;"></div>
				</div>

				<div class="cal-points-card">
					<div class="cal-points-header">
						<span>Calibration Points</span>
						<select id="doPointMode" class="cal-point-select">
							<option value="1">1-Point (Air Saturation)</option>
							<option value="2">2-Point (Air + Zero)</option>
						</select>
					</div>

					<div class="cal-temp-row">
						<label>Water Temperature:</label>
						<input type="number" id="doBufferTemp" value="25" step="0.1" class="cal-temp-input"> °C
					</div>

					<!-- Point 1: 100% Saturation -->
					<div class="cal-point" id="doPoint1">
						<div class="cal-point-header">
							<span class="cal-point-num">1</span>
							<span class="cal-point-label">Air-Saturated Water (100%)</span>
							<span class="cal-point-status" id="doPoint1Status">Waiting</span>
						</div>
						<div class="cal-point-body">
							<div class="cal-point-voltage">Captured: <span id="doPoint1Voltage">--</span> V</div>
							<button class="cal-capture-btn" id="doCapture1">Capture 100%</button>
						</div>
					</div>

					<!-- Point 2: 0% (optional) -->
					<div class="cal-point" id="doPoint2" style="display:none;">
						<div class="cal-point-header">
							<span class="cal-point-num">2</span>
							<span class="cal-point-label">Zero Oxygen Solution (0%)</span>
							<span class="cal-point-status" id="doPoint2Status">Waiting</span>
						</div>
						<div class="cal-point-body">
							<div class="cal-point-voltage">Captured: <span id="doPoint2Voltage">--</span> V</div>
							<button class="cal-capture-btn" id="doCapture2">Capture 0%</button>
						</div>
					</div>
				</div>

				<div class="cal-result-card" id="doResultCard" style="display:none;">
					<div class="cal-result-header">Calibration Result</div>
					<div class="cal-result-values">
						<div class="cal-result-item"><span>Slope:</span><span id="doNewSlope">--</span></div>
						<div class="cal-result-item"><span>Offset:</span><span id="doNewOffset">--</span></div>
					</div>
				</div>

				<div class="cal-actions">
					<button class="cal-btn cal-btn-secondary" id="doClearBtn">Clear</button>
					<button class="cal-btn cal-btn-primary" id="doApplyBtn" disabled>Apply Calibration</button>
				</div>
			</div>

			<!-- ========== TDS CALIBRATION ========== -->
			<div class="simple-cal-panel" data-sensor-type="tds" style="display:none;">
				<div class="cal-status-card">
					<div class="cal-status-header">
						<span class="cal-status-title">Current Calibration</span>
						<span class="cal-status-badge" id="tdsCalStatus">Not Calibrated</span>
					</div>
					<div class="cal-status-values">
						<div class="cal-stat"><span class="cal-stat-label">Slope</span><span class="cal-stat-value" id="tdsCurrentSlope">--</span></div>
						<div class="cal-stat"><span class="cal-stat-label">Offset</span><span class="cal-stat-value" id="tdsCurrentOffset">--</span></div>
					</div>
				</div>

				<div class="cal-live-card">
					<div class="cal-live-header">Live Voltage Reading</div>
					<div class="cal-live-value" id="tdsLiveVoltage">-- V</div>
					<div class="cal-live-hint">Updates every 2 seconds</div>
					<div id="tdsStability" style="margin-top:8px;font-size:13px;"></div>
				</div>

				<div class="cal-points-card">
					<div class="cal-points-header">
						<span>Calibration Points</span>
						<select id="tdsPointMode" class="cal-point-select">
							<option value="1">1-Point</option>
							<option value="2">2-Point</option>
						</select>
					</div>

					<div class="cal-temp-row">
						<label>Water Temperature:</label>
						<input type="number" id="tdsBufferTemp" value="25" step="0.1" class="cal-temp-input"> °C
					</div>

					<!-- Point 1 -->
					<div class="cal-point" id="tdsPoint1">
						<div class="cal-point-header">
							<span class="cal-point-num">1</span>
							<span class="cal-point-label">Standard Solution</span>
							<span class="cal-point-status" id="tdsPoint1Status">Waiting</span>
						</div>
						<div class="cal-point-body">
							<input type="number" id="tdsStandard1" placeholder="Enter ppm (e.g. 1000)" class="cal-standard-input">
							<div class="cal-point-voltage">Captured: <span id="tdsPoint1Voltage">--</span> V</div>
							<button class="cal-capture-btn" id="tdsCapture1">Capture</button>
						</div>
					</div>

					<!-- Point 2 (optional) -->
					<div class="cal-point" id="tdsPoint2" style="display:none;">
						<div class="cal-point-header">
							<span class="cal-point-num">2</span>
							<span class="cal-point-label">Second Standard</span>
							<span class="cal-point-status" id="tdsPoint2Status">Waiting</span>
						</div>
						<div class="cal-point-body">
							<input type="number" id="tdsStandard2" placeholder="Enter ppm (e.g. 500)" class="cal-standard-input">
							<div class="cal-point-voltage">Captured: <span id="tdsPoint2Voltage">--</span> V</div>
							<button class="cal-capture-btn" id="tdsCapture2">Capture</button>
						</div>
					</div>
				</div>

				<div class="cal-result-card" id="tdsResultCard" style="display:none;">
					<div class="cal-result-header">Calibration Result</div>
					<div class="cal-result-values">
						<div class="cal-result-item"><span>Slope:</span><span id="tdsNewSlope">--</span></div>
						<div class="cal-result-item"><span>Offset:</span><span id="tdsNewOffset">--</span></div>
					</div>
				</div>

				<div class="cal-actions">
					<button class="cal-btn cal-btn-secondary" id="tdsClearBtn">Clear</button>
					<button class="cal-btn cal-btn-primary" id="tdsApplyBtn" disabled>Apply Calibration</button>
				</div>
			</div>

			<!-- Success Modal -->
			<div class="cal-modal" id="calSuccessModal" style="display:none;">
				<div class="cal-modal-content">
					<div class="cal-modal-icon">&#10004;</div>
					<div class="cal-modal-title">Calibration Saved!</div>
					<div class="cal-modal-msg" id="calSuccessMsg">pH calibration applied successfully.</div>
					<button class="cal-modal-close" onclick="document.getElementById('calSuccessModal').style.display='none'">OK</button>
				</div>
			</div>
		</section>

		<section id="history" class="tab-content">
			<div class="history-board">
				<ul class="calibrate-tabs" id="historyTabs">
					<li class="calibrate-tab-btn active" data-history-tab="aero" id="historyTabAero">Aeroponics</li>
					<li class="calibrate-tab-btn" data-history-tab="dwc" id="historyTabDwc">Deep Water Culture</li>
					<li class="calibrate-tab-btn" data-history-tab="trad" id="historyTabTrad">Traditional</li>
				</ul>

				<div class="history-filters" id="plantHistoryFilters">
					<div class="history-plant-pills" aria-label="Plant selector">
						<span class="history-label">Plant No.:</span>
						<span class="history-pill active">1</span>
						<span class="history-pill">2</span>
						<span class="history-pill">3</span>
						<span class="history-pill">4</span>
						<span class="history-pill">5</span>
						<span class="history-pill">6</span>
					</div>
					<div class="history-frequency" >
						<button class="history-chip active">Daily</button>
						<button class="history-chip">15-min</button>
					</div>
				</div>

				<div class="history-filters" id="actuatorHistoryFilters" style="display:none;">
					<div class="history-frequency" >
						<button class="history-chip active">Daily</button>
						<button class="history-chip">15-min</button>
					</div>
				</div>

				<!-- Plant Readings Tab (Sensor + Plant combined) -->
				<div class="history-table-wrap" data-history-view="plant" id="plantHistoryView">
					<table class="history-table">
						<thead>
							<tr class="history-head-group">
								<th colspan="6" class="group sensor">Sensor Readings</th>
								<th colspan="5" class="group plant">Plant Readings</th>
							</tr>
							<tr class="history-head-cols">
								<th>Timestamp</th>
								<th>pH</th>
								<th>DO</th>
								<th>TDS</th>
								<th>Temp</th>
								<th>Humidity</th>
								<th>Leaves</th>
								<th>Branches</th>
								<th>Weight</th>
								<th>Length</th>
								<th>Height</th>
							</tr>
						</thead>
						<tbody>
							<tr><td colspan="11" class="history-empty">No data yet. Select a plant and interval to view history.</td></tr>
						</tbody>
					</table>
				</div>

				<!-- Actuator Events Tab (actuator + sensor readings) -->
				<div class="history-table-wrap" data-history-view="actuator" id="actuatorHistoryView">
					<table class="history-table">
						<thead>
							<tr class="history-head-group">
								<th colspan="10" class="group actuator">Actuator Events</th>
								<th colspan="5" class="group sensor">Sensor Readings</th>
							</tr>
							<tr class="history-head-cols">
								<th>Timestamp</th>
								<th>Misting</th>
								<th>Air Pump</th>
								<th>Exhaust IN</th>
								<th>Exhaust OUT</th>
								<th>Lights Aero</th>
								<th>Lights DWC</th>
								<th>pH Up</th>
								<th>pH Down</th>
								<th>Leafy Green</th>
								<th>pH</th>
								<th>DO</th>
								<th>TDS</th>
								<th>Temp</th>
								<th>Humidity</th>
							</tr>
						</thead>
						<tbody>
							<tr><td colspan="15" class="history-empty">No actuator events recorded yet.</td></tr>
						</tbody>
					</table>
				</div>
			</div>
			


			

			
		</section>

		<section id="growth-state" class="tab-content">
			<div class="growth-comparison-card">
				<div class="growth-card-header">
					<h2>Growth Comparison</h2>
					
							<div class="growth-metric-controls">
								<button class="metric-btn active" data-metric="height">Height</button>
								<button class="metric-btn" data-metric="width">Width</button>
								<button class="metric-btn" data-metric="length">Length</button>
								<button class="metric-btn" data-metric="leaves">No. of Leaves</button>
								<button class="metric-btn" data-metric="branches">No. of Branches</button>
							</div>
							<div class="growth-time-controls">
								<button class="time-btn" data-days="1">1 Day</button>
								<button class="time-btn" data-days="14">14 Days</button>
								<button class="time-btn" data-days="all">All</button>
							</div>
						
						
				
				</div>
				<div class="growth-card-body">
					<div class="comparison-graph-card">
						<canvas id="comparisonGraph"></canvas>
						<div id="graphTooltip" class="canvas-hover-tooltip" style="display:none;"></div>
					</div>
					<div class="growth-legend bottom-legend">
						<div class="legend-item"><span class="legend-swatch" style="background:#4CAF50"></span><span>Aeroponic</span></div>
						<div class="legend-item"><span class="legend-swatch" style="background:#2196F3"></span><span>Deep Water Culture</span></div>
						<div class="legend-item"><span class="legend-swatch" style="background:#FF9800"></span><span>Traditional</span></div>
					</div>
				</div>
			</div>
		</section>
		<!-- Logout Confirmation Modal -->
		<div id="logoutModal" class="logout-modal" style="display: none;">
			<div class="logout-modal-content">
				<div class="logout-modal-header">
					<div class="logout-title">
						<h3>Sign out</h3>
					</div>
				</div>
				<div class="logout-modal-body">
					<p>Are you sure you want to logout? Any unsaved changes will be lost.</p>
				</div>
				<div class="logout-modal-footer">
					<button class="logout-cancel-btn" id="logoutCancel">Cancel</button>
					<button class="logout-confirm-btn" id="logoutConfirm">Sign out</button>
				</div>
			</div>
		</div>

		<!-- Calibration Validation Modal -->
		<div id="calibrationValidationModal" class="calibration-validation-modal" style="display: none;">
			<div class="calibration-validation-content">
				<div class="calibration-validation-header">
					<h3>⚠️ Missing Values</h3>
					<button class="calibration-validation-close" id="calibrationValidationClose">&times;</button>
				</div>
				<div class="calibration-validation-body">
					<p id="calibrationValidationMessage">Please fill in all values before proceeding.</p>
				</div>
				<div class="calibration-validation-footer">
					<button class="calibration-validation-ok-btn" id="calibrationValidationOk">OK</button>
				</div>
			</div>
		</div>

		<!-- Calibration Confirmation Modal -->
		<div id="calibrationConfirmModal" class="calibration-validation-modal" style="display: none;">
			<div class="calibration-validation-content">
				<div class="calibration-validation-header">
					<h3>⚠️ Confirm Calibration Update</h3>
					<button class="calibration-validation-close" id="calibrationConfirmClose">&times;</button>
				</div>
				<div class="calibration-validation-body">
					<p>Are you sure you want to update calibration?</p>
					<p style="margin-top: 10px; font-size: 0.95em; color: #666;">This will turn off the calibration mode.</p>
				</div>
				<div class="calibration-validation-footer">
					<button class="calibration-validation-ok-btn" id="calibrationConfirmCancel" style="background: #666;">Cancel</button>
					<button class="calibration-validation-ok-btn" id="calibrationConfirmOk">Confirm</button>
				</div>
			</div>
		</div>

		<!-- Show All Modal (large chart for full-range view) -->
		<div id="showAllModal" class="validation-error-modal" style="display: none;">
			<div class="validation-error-content" style="max-width:1100px;">
				<div class="validation-error-header">
					<h3 id="showAllTitle">Plant Data</h3>
					
				</div>
				<div class="validation-error-body" style="padding:12px;">
					<div class="show-all-table-wrapper" style="height:288px; overflow:auto;">
						<table id="showAllTable" style="width:100%; border-collapse:collapse;">
							<thead>
								<tr style="background:#f7faf7;">
									<th style="text-align:left; padding:10px; border-bottom:1px solid #e8f0e8;">Date</th>
									<th style="text-align:right; padding:10px; border-bottom:1px solid #e8f0e8;">Actual</th>
									<th style="text-align:right; padding:10px; border-bottom:1px solid #e8f0e8;">Predicted</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
				<div class="validation-error-footer">
					<button class="validation-ok-btn" id="showAllOk">Close</button>
				</div>
			</div>
		</div>

		<!-- API Settings Modal -->
		<div id="apiSettingsModal" class="api-settings-modal" style="display:none;">
			<div class="api-settings-content">
				<div class="api-settings-header">
					<h3>🔥 Connection Info</h3>
					<button class="api-settings-close" onclick="closeApiSettings()">&times;</button>
				</div>
				<div class="api-settings-body">
					<p style="font-size:16px;margin-bottom:15px;"><strong>Cloud Access:</strong> Firebase Firestore</p>
					<p style="color:#4CAF50;">✓ Real-time sync enabled via Firebase</p>
					<p style="color:#4CAF50;">✓ No tunnel configuration required</p>
					<hr style="margin:15px 0;border:none;border-top:1px solid #ddd;">
					<p><strong>Local LAN Access:</strong></p>
					<p style="font-size:12px;color:#666;"><code>http://192.168.100.72:5000</code></p>
				</div>
				<div class="api-settings-footer">
					<button onclick="closeApiSettings()" style="padding:10px 20px;background:#4CAF50;color:white;border:none;border-radius:5px;cursor:pointer;">OK</button>
				</div>
			</div>
		</div>
		
		<style>
		.api-settings-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:10000;display:flex;align-items:center;justify-content:center;}
		.api-settings-content{background:white;border-radius:15px;padding:25px;max-width:500px;width:90%;box-shadow:0 10px 40px rgba(0,0,0,0.3);}
		.api-settings-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;}
		.api-settings-header h3{margin:0;color:#333;}
		.api-settings-close{background:none;border:none;font-size:28px;cursor:pointer;color:#999;}
		.api-settings-close:hover{color:#333;}
		.api-settings-body p{margin:10px 0;color:#555;}
		.api-settings-body code{background:#f0f0f0;padding:2px 6px;border-radius:3px;font-size:11px;}
		.api-settings-footer{margin-top:20px;text-align:right;}
		#apiSettingsBtn{position:fixed;bottom:20px;right:20px;width:50px;height:50px;border-radius:50%;background:#4CAF50;color:white;border:none;font-size:24px;cursor:pointer;box-shadow:0 4px 15px rgba(0,0,0,0.3);z-index:9999;}
		#apiSettingsBtn:hover{background:#45a049;transform:scale(1.1);}
		#apiSettingsBtn.error{background:#f44336;animation:pulse 1s infinite;}
		@keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.6;}}
		</style>
		
		<button id="apiSettingsBtn" onclick="openApiSettings()" title="API Settings">⚙️</button>

		<!-- Chart.js CDN for growth parameters chart -->
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<script src="index.js"></script>

		
		<script type="module">
			import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
			import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
			
			const firebaseConfig = {
				apiKey: "AIzaSyCSuJ4kVaxq7uKllRnrt-EaCxIGmMTNI30",
				authDomain: "siboltech.firebaseapp.com",
				projectId: "siboltech",
				storageBucket: "siboltech.firebasestorage.app",
				messagingSenderId: "101056247860",
				appId: "1:101056247860:web:d5aa77df309a650ba07261"
			};
			
			const app = initializeApp(firebaseConfig);
			const db = getFirestore(app);
			console.log("Firebase initialized");
			
			const docRef = doc(db, "sensors", "latest");
			onSnapshot(docRef, (docSnap) => {
				if (docSnap.exists()) {
					const data = docSnap.data();
					
					const phVal = (data.ph && data.ph.value !== undefined) ? parseFloat(data.ph.value).toFixed(2) : "--";
					const doVal = (data.do_mg_l && data.do_mg_l.value !== undefined) ? parseFloat(data.do_mg_l.value).toFixed(2) + " mg/L" : "-- mg/L";
					const tempVal = (data.temperature_c && data.temperature_c.value !== undefined) ? parseFloat(data.temperature_c.value).toFixed(1) + " C" : "-- C";
					const humVal = (data.humidity && data.humidity.value !== undefined) ? parseFloat(data.humidity.value).toFixed(1) + " %" : "-- %";
					const tdsVal = (data.tds_ppm && data.tds_ppm.value !== undefined) ? parseFloat(data.tds_ppm.value).toFixed(0) + " ppm" : "-- ppm";

					document.querySelectorAll("#val-ph, [data-sensor='ph'] .value").forEach(el => { if (el) el.textContent = phVal; });
					document.querySelectorAll("#val-do, [data-sensor='do'] .value").forEach(el => { if (el) el.textContent = doVal; });
					document.querySelectorAll("#val-temp, [data-sensor='temp'] .value").forEach(el => { if (el) el.textContent = tempVal; });
					document.querySelectorAll("#val-hum, [data-sensor='hum'] .value").forEach(el => { if (el) el.textContent = humVal; });
					document.querySelectorAll("#val-tds, [data-sensor='tds'] .value").forEach(el => { if (el) el.textContent = tdsVal; });
					
					window.firebaseListenerActive = true;
				}
			}, (error) => {
				console.error("Firebase error:", error);
			});
		</script>

		
				<!-- Firebase SDK - load after index.js so listeners are ready -->
		<script type="module">
			import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
			import { getFirestore, doc, onSnapshot, collection, addDoc, getDocs, query, orderBy, limit, serverTimestamp, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
			
			const firebaseConfig = {
				apiKey: "AIzaSyCSuJ4kVaxq7uKllRnrt-EaCxIGmMTNI30",
				authDomain: "siboltech.firebaseapp.com",
				projectId: "siboltech",
				storageBucket: "siboltech.firebasestorage.app",
				messagingSenderId: "101056247860",
				appId: "1:101056247860:web:d5aa77df309a650ba07261"
			};
			
			const app = initializeApp(firebaseConfig);
			const db = getFirestore(app);
			
			// Make Firebase available globally for index.js
			window.firebaseDB = db;
			window.firebaseDoc = doc;
			window.firebaseOnSnapshot = onSnapshot;
			window.firebaseCollection = collection;
			window.firebaseAddDoc = addDoc;
			window.firebaseGetDocs = getDocs;
			window.firebaseQuery = query;
			window.firebaseOrderBy = orderBy;
			window.firebaseLimit = limit;
			window.firebaseServerTimestamp = serverTimestamp;
			window.firebaseReady = true;
			
			console.log('✅ Firebase initialized');
			
			// ===== SENSOR READINGS (real-time) =====
			const sensorDocRef = doc(db, 'sensors', 'latest');
			onSnapshot(sensorDocRef, (docSnap) => {
				if (docSnap.exists()) {
					const data = docSnap.data();
					console.log('📡 Sensors:', Object.keys(data).filter(k => !k.startsWith('_')).join(', '));
					
					const phVal = (data.ph && data.ph.value !== undefined) ? parseFloat(data.ph.value).toFixed(2) : '--';
					const doVal = (data.do_mg_l && data.do_mg_l.value !== undefined) ? parseFloat(data.do_mg_l.value).toFixed(2) + ' mg/L' : '-- mg/L';
					const tempVal = (data.temperature_c && data.temperature_c.value !== undefined) ? parseFloat(data.temperature_c.value).toFixed(1) + ' °C' : '-- °C';
					const humVal = (data.humidity && data.humidity.value !== undefined) ? parseFloat(data.humidity.value).toFixed(1) + ' %' : '-- %';
					const tdsVal = (data.tds_ppm && data.tds_ppm.value !== undefined) ? parseFloat(data.tds_ppm.value).toFixed(0) + ' ppm' : '-- ppm';

					document.querySelectorAll('#val-ph, [data-sensor="ph"] .value').forEach(el => { if (el) el.textContent = phVal; });
					document.querySelectorAll('#val-do, [data-sensor="do"] .value').forEach(el => { if (el) el.textContent = doVal; });
					document.querySelectorAll('#val-temp, [data-sensor="temp"] .value').forEach(el => { if (el) el.textContent = tempVal; });
					document.querySelectorAll('#val-hum, [data-sensor="hum"] .value').forEach(el => { if (el) el.textContent = humVal; });
					document.querySelectorAll('#val-tds, [data-sensor="tds"] .value').forEach(el => { if (el) el.textContent = tdsVal; });
					
					window.latestSensorData = data;
					window.firebaseListenerActive = true;
				}
			}, (error) => {
				console.error('Firebase sensor error:', error.message);
			});
			
			// ===== ACTUATOR/RELAY STATUS (real-time) =====
			const relayDocRef = doc(db, 'actuators', 'relays');
			onSnapshot(relayDocRef, (docSnap) => {
				if (docSnap.exists()) {
					const data = docSnap.data();
					const status = data.status || {};
					console.log('🔌 Relays:', Object.entries(status).map(([k,v]) => `${k}:${v}`).join(', '));
					
					// Map relay numbers to actuator IDs
					const RELAY_TO_ACTUATOR = {
						4: 'act-water',
						7: 'act-air',
						9: 'act-fan-in',
						5: 'act-fan-out',
						6: 'act-lights-aerponics',
						8: 'act-lights-dwc'
					};
					
					for (const [relay, state] of Object.entries(status)) {
						const relayNum = parseInt(relay.replace('R', ''));
						const actId = RELAY_TO_ACTUATOR[relayNum];
						if (actId) {
							const checkbox = document.getElementById(actId);
							if (checkbox) {
								const isOn = state === 'ON';
								checkbox.checked = isOn;
								const textEl = checkbox.closest('.toggle-switch')?.querySelector('.toggle-text');
								if (textEl) textEl.textContent = isOn ? 'ON' : 'OFF';
							}
						}
					}
					window.relayStatus = status;
				}
			}, (error) => {
				console.error('Firebase relay error:', error.message);
			});
			
			// ===== SEND RELAY COMMAND (via Firebase) =====
			window.sendRelayCommandFirebase = async function(relay, action) {
				try {
					const commandsRef = collection(db, 'relay_commands');
					await addDoc(commandsRef, {
						relay: relay,
						action: action,
						status: 'pending',
						created_at: serverTimestamp()
					});
					console.log(`📤 Command sent: ${relay} ${action}`);
					return true;
				} catch (error) {
					console.error('Failed to send command:', error);
					return false;
				}
			};

					// ===== SEND OVERRIDE MODE (via Firebase) =====
					window.sendOverrideModeFirebase = async function(enabled) {
						try {
							const overrideRef = doc(db, 'settings', 'override_mode');
							await setDoc(overrideRef, {
								enabled: enabled,
								source: 'dashboard',
								updated_at: serverTimestamp()
							});
							console.log(`🔒 Override mode: ${enabled ? 'ON (manual)' : 'OFF (auto)'}`); 
							return true;
						} catch (error) {
							console.error('Failed to send override mode:', error);
							return false;
						}
					};
			
			// ===== LOAD CALIBRATION =====
			const calDocRef = doc(db, 'settings', 'calibration');
			onSnapshot(calDocRef, (docSnap) => {
				if (docSnap.exists()) {
					const data = docSnap.data();
					window.firebaseCalibration = data.sensors || {};
					console.log('📐 Calibration loaded:', Object.keys(window.firebaseCalibration).join(', '));
				}
			}, (error) => {
				console.error('Firebase calibration error:', error.message);
			});
			

			// ===== SAVE CALIBRATION TO FIREBASE =====
			window.saveCalibrationFirebase = async function(sensor, slope, offset) {
				try {
					const calDocRef = doc(db, 'settings', 'calibration');
					const docSnap = await getDoc(calDocRef);
					let sensors = {};
					if (docSnap.exists()) {
						sensors = docSnap.data().sensors || {};
					}
					sensors[sensor] = { slope, offset, updated_at: new Date().toISOString() };
					await setDoc(calDocRef, { sensors }, { merge: true });
					console.log('Calibration saved for ' + sensor);
					return true;
				} catch (error) {
					console.error('Failed to save calibration:', error);
					return false;
				}
			};

			// ===== LOAD HISTORY (for charts) =====
			window.loadSensorHistory = async function(limitCount = 100) {
				try {
					const historyRef = collection(db, 'sensors', 'history', 'readings');
					const q = query(historyRef, orderBy('timestamp', 'desc'), limit(limitCount));
					const snapshot = await getDocs(q);
					const history = [];
					snapshot.forEach(doc => {
						history.push({ id: doc.id, ...doc.data() });
					});
					console.log(`📊 Loaded ${history.length} history records`);
					return history.reverse(); // Oldest first
				} catch (error) {
					console.error('Failed to load history:', error);
					return [];
				}
			};
			
			// ===== SAVE PLANT READING (training data) =====
			window.savePlantReadingFirebase = async function(plantData) {
				try {
					const readingsRef = collection(db, 'plant_readings');
					await addDoc(readingsRef, {
						...plantData,
						created_at: serverTimestamp()
					});
					console.log('🌱 Plant reading saved:', plantData.plant_id);
					return true;
				} catch (error) {
					console.error('Failed to save plant reading:', error);
					return false;
				}
			};
			
			// ===== LOAD PLANT HISTORY =====
			window.loadPlantHistory = async function(farmingSystem, limitCount = 100) {
				try {
					const readingsRef = collection(db, 'plant_readings');
					const q = query(readingsRef, orderBy('created_at', 'desc'), limit(limitCount));
					const snapshot = await getDocs(q);
					const readings = [];
					snapshot.forEach(doc => {
						const data = doc.data();
						if (!farmingSystem || data.farming_system === farmingSystem) {
							readings.push({ id: doc.id, ...data });
						}
					});
					console.log('🌱 Loaded ' + readings.length + ' plant readings');
					return readings.reverse();
				} catch (error) {
					console.error('Failed to load plant history:', error);
					return [];
				}
			};
			
			// Dispatch event when Firebase is ready
			window.dispatchEvent(new Event('firebaseReady'));
		</script>
</body>

</html>
